<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movable Nested Divs Example</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
        }
        .container {
            width: 80%;
            margin: 0 auto;
        }
        .content-div {
            position: relative;
            border: 2px dashed transparent;
            transition: border-color 0.3s;
            padding: 20px;
            margin-bottom: 15px;
            background-color: #f9f9f9;
            border-radius: 5px;
        }
        .content-div:hover {
            border-color: blue;
        }
        .arrow {
            display: none; /* Initially hidden */
            position: absolute;
            top: 10px;
            right: 10px;
            cursor: pointer;
        }
        .content-div:hover .arrow {
            display: block; /* Show arrows on hover */
        }
        #saveButton {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: #28a745; /* Green */
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            font-size: 16px;
            display: none; /* Initially hidden */
            cursor: pointer;
            z-index: 1000; /* Ensure it floats above other content */
        }
    </style>
</head>
<body>

    <div class="container">
        <div class="content-div">
            <h2>Section 1: Introduction</h2>
            <p>This section introduces the topic. It provides a quick overview and sets the stage for the rest of the content.</p>
            <span class="arrow up-arrow">&#8593;</span>
            <span class="arrow down-arrow">&#8595;</span>
        </div>

        <div class="content-div">
            <h2>Section 2: Features</h2>
            <p>Here we explore the various features available in this application. Each feature is explained in detail.</p>
            <div class="content-div">
                <h3>Feature A</h3>
                <p>Description of Feature A, detailing how it can be used effectively.</p>
                <span class="arrow up-arrow">&#8593;</span>
                <span class="arrow down-arrow">&#8595;</span>
            </div>
            <div class="content-div">
                <h3>Feature B</h3>
                <p>Description of Feature B, focusing on its benefits and applications.</p>
                <span class="arrow up-arrow">&#8593;</span>
                <span class="arrow down-arrow">&#8595;</span>
            </div>
        </div>

        <div class="content-div">
            <h2>Section 3: Conclusion</h2>
            <p>This section summarizes the key points discussed and provides the final thoughts on the topic.</p>
            <span class="arrow up-arrow">&#8593;</span>
            <span class="arrow down-arrow">&#8595;</span>
        </div>
    </div>

    <button id="saveButton">Save</button>

    <script>
    $(document).ready(function() {
        // Initialize Save Button functionality
        const $saveButton = $('#saveButton');

        // Append arrows to each content div and set up functionality
        $('.content-div').each(function() {
            // Up Arrow functionality
            $(this).find('.up-arrow').on('click', function() {
                var currentDiv = $(this).closest('.content-div');
                var previousDiv = currentDiv.prev('.content-div');
                if (previousDiv.length) {
                    currentDiv.insertBefore(previousDiv); // Move up
                    showSaveButton(); // Show the Save button upon moving
                }
            });

            // Down Arrow functionality
            $(this).find('.down-arrow').on('click', function() {
                var currentDiv = $(this).closest('.content-div');
                var nextDiv = currentDiv.next('.content-div');
                if (nextDiv.length) {
                    currentDiv.insertAfter(nextDiv); // Move down
                    showSaveButton(); // Show the Save button upon moving
                }
            });
        });

        // Function to show the Save button
        function showSaveButton() {
            $saveButton.fadeIn(); // Show the button with a fade effect
        }

        // Save Button Click Event
        $saveButton.on('click', function() {
            // Future API call can be added here to save the new structure
            updateServerData(); // Call placeholder function
            
            // Hide the Save button after saving
            $saveButton.fadeOut();
        });

        // Placeholder for an API function
        function updateServerData() {
            // Logic to update data on the server
            // e.g., $.post('/api/update', {data: getDivData()});
            console.log('Data has been saved! (Placeholder for actual server call)');
        }

        // Placeholder function to gather data from divs
        function getDivData() {
            // Return some data from the divs if needed for an API call.
            return $('.content-div').map(function() {
                return $(this).find('h2, h3, p').map((_, el) => $(el).text()).get().join(" | "); // Example: return combined text of title and paragraph
            }).get();
        }
    });
    </script>
</body>
</html>
